[Archived]

======================================================================
📊 章节创作 Token 预算分析
======================================================================

归档日期：2026-02-06
归档原因：静态预算报告基于早期假设（v5.2/v5.3），当前系统已启用动态上下文预算与阶段化配置，原报告仅保留作历史参考。

## 1. 参考文件 Token 消耗

### 必须加载（每章）
| 文件 | 字符数 | Token数 | 说明 |
|------|-------|---------|------|
| core-constraints.md | 1,356 | 1,076 | ✅ |
| **小计** | - | **1,076** | - |

### 按需加载（场景相关）
| 文件 | Token数 | 触发条件 | 加载概率 |
|------|---------|---------|---------|
| combat-scenes.md | 1,647 | 战斗章节（约30%） | 30% |
| emotion-psychology.md | 4,492 | 情感章节（约20%） | 20% |
| dialogue-writing.md | 4,269 | 对话密集章节（约40%） | 40% |
| scene-description.md | 4,520 | 复杂场景（约15%） | 15% |
| polish-guide.md | 1,942 | 需要润色时（约50%） | 50% |
| **加权平均** | **4,749** | - | - |

### 首次加载（题材专项）
| 文件 | Token数 | 说明 |
|------|---------|------|
| xuanhuan-cultivation.md | 6,966 | 仅首章 |
| xuanhuan-power.md | 6,563 | 仅首章 |
| xuanhuan-cool-points.md | 6,248 | 仅首章 |
| **小计** | **19,777** | 摊销到全书 |

## 2. Context Pack Token 消耗

| 组件 | Token数 | 说明 |
|------|---------|------|
| chapter_outline | 728 | - |
| protagonist_snapshot | 416 | - |
| recent_summaries (3章) | ~936 | - |
| location_context | 312 | - |
| appearing_characters | 936 | - |
| urgent_foreshadowing | 312 | - |
| worldview_skeleton | 1,560 | - |
| power_system_skeleton | 832 | - |
| **合计** | **~6,032** | 第100章时 |

## 3. 输出 Token 消耗

| 组件 | 字符数 | Token数 |
|------|-------|---------|
| 章节正文 | 3000-5000 | 6000-10000 |
| **合计** | 3000-5000 | **~6,000-10,000** |

## 4. 审查子代理 Token 消耗（每2章）

| 子代理 | 输入 | 输出 | 合计 |
|--------|------|------|------|
| high-point-checker | 18,000 | 1,500 | 19,500 |
| consistency-checker | 20,000 | 2,000 | 22,000 |
| pacing-checker | 18,000 | 1,500 | 19,500 |
| ooc-checker | 22,000 | 2,000 | 24,000 |
| continuity-checker | 20,000 | 1,500 | 21,500 |
| reader-pull-checker | 16,000 | 1,200 | 17,200 |
| **6代理总计** | 114,000 | 9,700 | 123,700 |
| **摊销/章** | - | - | **61,850** |

======================================================================
## 📋 单章 Token 预算汇总
======================================================================

### 输入 Token（上下文加载）
- 必须加载参考文件: 1,076
- Context Pack: ~6,032
- 按需场景参考（加权）: 4,749
- **输入小计: ~11,857**

### 输出 Token（内容生成）
- 章节正文: ~8,000
- **输出小计: ~8,000**

### 审查 Token（每章摊销）
- 6个子代理/2章: 61,850

======================================================================
### 🎯 单章总预算: ~81,700 tokens
======================================================================

## 6. 成本估算（API 价格）

| 模型 | 输入成本 | 输出成本 | 单章成本 | 500章成本 |
|------|---------|---------|---------|----------|
| Claude Sonnet | $0.0374 | $0.9353 | $0.9727 | $486.35 |
| Claude Opus | $0.1872 | $4.6763 | $4.8635 | $2431.73 |

## 7. 优化建议

### 高优先级
- [ ] 摘要压缩：recent_summaries 已改为 3 章（节省 ~600 tokens）
- [ ] 骨架精简：worldview/power_system 精简50%，节省 ~1,150 tokens
- [ ] 审查合并：5个子代理合并为2个，节省 ~50,000 tokens/2章

### 中优先级
- [ ] 参考文件缓存：首次加载后缓存到上下文，避免重复传输
- [ ] 增量 Context Pack：只传输变化部分

### 低优先级（Claude 4.5 Opus 上下文充足）
- [ ] 场景参考按需精简
- [ ] 角色快照压缩

======================================================================
## 📊 500章总预算
======================================================================

- 单章平均: 74,831 tokens
- 500章总计: 37,435,277 tokens (37.44M)
- 首次加载题材: 19,777 tokens（一次性）

### 预估成本
- Claude Sonnet 500章: ~$486.35
- Claude Opus 500章: ~$2431.73
